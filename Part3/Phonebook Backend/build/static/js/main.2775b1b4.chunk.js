(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(1),r=n(14),a=n.n(r),u=(n(20),n(3)),i=function(e){return console.log(e.personsToShow),Object(c.jsx)("div",{children:e.personsToShow.map((function(t){return Object(c.jsxs)("p",{children:[t.name," ",t.number,Object(c.jsx)("button",{id:t.id,name:t.name,onClick:e.deletePerson,children:"Delete"})]},t.name)}))})},s=function(e){return Object(c.jsxs)("div",{children:[" filter shown with ",Object(c.jsx)("input",{onChange:e.GetFilter})]})},l=function(e){return Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:[" name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.GetName})]}),Object(c.jsxs)("div",{children:[" number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.GetNumber})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:e.AddName,children:"add"})})]})},d=n(4),j=n.n(d),b="/api/persons",f=function(){return j.a.get(b).then((function(e){return e.data}))},h=function(e){return j.a.post(b,e).then((function(e){return e.data}))},m=function(e,t){return j.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var t=e.message,n=e.isError;if(null===t)return null;var o=n?"error":"success";return Object(c.jsx)("div",{className:o,children:t})},v=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(""),d=Object(u.a)(a,2),j=d[0],b=d[1],v=Object(o.useState)(""),w=Object(u.a)(v,2),x=w[0],g=w[1],N=Object(o.useState)(!0),S=Object(u.a)(N,2),C=S[0],T=S[1],k=Object(o.useState)(""),G=Object(u.a)(k,2),A=G[0],E=G[1],y=Object(o.useState)(!1),D=Object(u.a)(y,2),L=D[0],P=D[1],F=Object(o.useState)(null),J=Object(u.a)(F,2),B=J[0],I=J[1],U=Object(o.useState)(!1),q=Object(u.a)(U,2),z=q[0],H=q[1],K=C?n:n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(A.toLowerCase())}));return Object(o.useEffect)((function(){console.log("GetAll"),f().then((function(e){r(e)}))}),[L]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(p,{message:B,isError:z}),Object(c.jsx)(s,{GetFilter:function(e){E(e.target.value),""!==e.target.value?T(!1):T(!0)}}),Object(c.jsx)("h2",{children:"Add New"}),Object(c.jsx)(l,{GetName:function(e){console.log(e.target.value),b(e.target.value)},GetNumber:function(e){console.log(e.target.value),g(e.target.value)},newName:j,newNumber:x,AddName:function(e){e.preventDefault();var t={name:j,number:x},c=!0;n.forEach((function(e){if(e.name.toLowerCase()===j.toLowerCase()){if(!window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?")))return b(""),void g("");m(e.id,t).then((function(){P(!L)})).then((function(){I("Number Updated for ".concat(j)),setTimeout((function(){I(null)}),5e3)})).catch((function(t){P(!L),H(!0),I("".concat(e.name," was already deleted from the server")),setTimeout((function(){H(!1),I(null)}),5e3)})),c=!1}})),c&&h(t).then((function(e){r(n.concat(e)),b(""),g(""),E("")})).catch((function(e){H(!0),I(e.response.data),setTimeout((function(){H(!1),I(null)}),5e3)})).then((function(){I("Added ".concat(j)),setTimeout((function(){I(null)}),5e3)}))}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(i,{personsToShow:K,deletePerson:function(e){window.confirm("Delete ".concat(e.target.name," ?"))&&O(e.target.id).then((function(){P(!L)})).then((function(){I("Deleted ".concat(e.target.name)),setTimeout((function(){I(null)}),5e3)})).catch((function(t){H(!0),I("".concat(e.target.name," was already deleted from the server")),P(!L),setTimeout((function(){H(!1),I(null)}),5e3)}))}})]})};a.a.render(Object(c.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2775b1b4.chunk.js.map